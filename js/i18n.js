/**
 * Sistema de internacionalização
 * Gerencia a troca de idiomas na interface
 */

// Dicionário de traduções global - acessível para todos os scripts
window.traducoes = {
    // Header - Navegação
    'nav_home': {
        'pt': 'Home',
        'en': 'Home'
    },
    'nav_about': {
        'pt': 'Sobre',
        'en': 'About'
    },
    'nav_skills': {
        'pt': 'Habilidades',
        'en': 'Skills'
    },
    'nav_projects': {
        'pt': 'Projetos',
        'en': 'Projects'
    },
    'nav_disciplines': {
        'pt': 'Disciplinas',
        'en': 'Courses'
    },
    'nav_contact': {
        'pt': 'Contato',
        'en': 'Contact'
    },
    'nav_html_dict': {
        'pt': 'Dicionário HTML',
        'en': 'HTML Dictionary'
    },
    
    // Home Section
    'home_title': {
        'pt': 'Eleve seu negócio digital a outro nível com um Front-end de qualidade!',
        'en': 'Take your digital business to the next level with quality Front-end development!'
    },
    'home_subtitle': {
        'pt': 'Desenvolvimento web com enfoque em experiência de usuário',
        'en': 'Web development focused on user experience'
    },
    'home_cta_contact': {
        'pt': 'Vamos conversar',
        'en': 'Let\'s talk'
    },
    'home_cta_projects': {
        'pt': 'Ver projetos',
        'en': 'See projects'
    },
    'home_cta_cv': {
        'pt': 'Baixar CV',
        'en': 'Download CV'
    },
    
    // About Section
    'about_title': {
        'pt': 'Sobre mim',
        'en': 'About me'
    },
    'about_intro': {
        'pt': 'Olá! Sou Davi Turnes Vieira, desenvolvedor Front-end com especialidade em Java, C/C++, Python, JavaScript, HTML e CSS. Ajudo pequenos negócios e designers a colocarem em prática boas ideias.',
        'en': 'Hello! I\'m Davi Turnes Vieira, a Front-end developer specializing in Java, C/C++, Python, JavaScript, HTML and CSS. I help small businesses and designers to put good ideas into practice.'
    },
    'about_description': {
        'pt': 'O que me move é criar soluções que facilitam a vida das pessoas através de interfaces intuitivas e experiências memoráveis. Adoro o desafio de equilibrar código limpo com design agradável, e acredito que a melhor tecnologia é aquela que resolve problemas reais. E sim, eu converso com meu código quando ele não funciona—surpreendentemente eficaz!',
        'en': 'What drives me is creating solutions that make people\'s lives easier through intuitive interfaces and memorable experiences. I love the challenge of balancing clean code with pleasant design, and I believe that the best technology is one that solves real problems. And yes, I talk to my code when it doesn\'t work—surprisingly effective!'
    },
    'stats_experience': {
        'pt': 'Anos de Experiência',
        'en': 'Years of Experience'
    },
    'stats_projects': {
        'pt': 'Projetos Completos',
        'en': 'Completed Projects'
    },
    'stats_commits': {
        'pt': 'Commits no GitHub',
        'en': 'GitHub Commits'
    },
    
    // Skills Section
    'skills_title': {
        'pt': 'Habilidades',
        'en': 'Skills'
    },
    'competencies_title': {
        'pt': 'Competências',
        'en': 'Competencies'
    },
    'competencies_frontend': {
        'pt': 'Desenvolvimento Frontend',
        'en': 'Frontend Development'
    },
    'competencies_backend': {
        'pt': 'Desenvolvimento Backend',
        'en': 'Backend Development'
    },
    'competencies_tools': {
        'pt': 'Ferramentas & Metodologias',
        'en': 'Tools & Methodologies'
    },
    'skills_technical': {
        'pt': 'Habilidades Técnicas',
        'en': 'Technical Skills'
    },
    'skills_frontend': {
        'pt': 'Desenvolvimento Frontend',
        'en': 'Frontend Development'
    },
    'skills_backend': {
        'pt': 'Desenvolvimento Backend',
        'en': 'Backend Development'
    },
    
    // Projects Section
    'projects_title': {
        'pt': 'Projetos',
        'en': 'Projects'
    },
    'proj_filter_all': {
        'pt': 'Todos',
        'en': 'All'
    },
    'proj_filter_web': {
        'pt': 'Web',
        'en': 'Web'
    },
    'proj_filter_java': {
        'pt': 'Java',
        'en': 'Java'
    },
    'proj_filter_other': {
        'pt': 'Outros',
        'en': 'Others'
    },
    'project_view_code': {
        'pt': 'Ver Código',
        'en': 'View Code'
    },
    
    // Project titles
    'project_secret_number_title': {
        'pt': 'Jogo do Número Secreto',
        'en': 'Secret Number Game'
    },
    'project_secret_friend_title': {
        'pt': 'Sorteio de Amigo Secreto',
        'en': 'Secret Santa Draw'
    },
    'project_ourtube_title': {
        'pt': 'OurTube',
        'en': 'OurTube'
    },
    'project_planner_title': {
        'pt': 'Plann.er',
        'en': 'Plann.er'
    },
    'project_todolist_title': {
        'pt': 'ToDo List',
        'en': 'To-Do List'
    },
    'project_delta_title': {
        'pt': 'Projeto Delta U42',
        'en': 'Delta U42 Project'
    },
    'project_rpg_clt_title': {
        'pt': 'RPG CLT',
        'en': 'RPG FLSA'
    },
    'project_goals_title': {
        'pt': 'Gerenciador de Metas',
        'en': 'Goals Manager'
    },
    'project_rpg_market_title': {
        'pt': 'RPG Market',
        'en': 'RPG Market'
    },
    'project_portfolio_title': {
        'pt': 'Portfólio Web',
        'en': 'Portfolio Web'
    },

    // Project descriptions
    'project_secret_number': {
        'pt': 'Jogo de adivinhação de números desenvolvido com HTML, CSS e JavaScript. Inclui múltiplos temas visuais, narrador de voz para acessibilidade, histórico de jogos e leaderboard. Projeto criado como parte do programa Oracle Next Education (ONE).',
        'en': 'Number guessing game developed with HTML, CSS and JavaScript. Includes multiple visual themes, voice narrator for accessibility, game history, and leaderboard. Project created as part of the Oracle Next Education (ONE) program.'
    },
    'project_secret_friend': {
        'pt': 'Aplicação web que simplifica a organização de sorteios de amigo secreto. Desenvolvida com JavaScript puro, a aplicação não depende de frameworks ou bibliotecas externas, garantindo carregamento rápido e compatibilidade com a maioria dos navegadores, desenvolvido durante o Challenge ONE.',
        'en': 'Web application that simplifies the organization of secret Santa drawings. Developed with pure JavaScript, the application does not depend on external frameworks or libraries, ensuring fast loading and compatibility with most browsers, developed during the ONE Challenge.'
    },
    'project_ourtube': {
        'pt': 'Aplicativo Python para download de vídeos/áudios do YouTube com GUI e CLI. Recursos: seleção de qualidade, playlists, extração MP3 e organização automática. Tecnologias: yt-dlp, FFmpeg, Tkinter, Threading, Mutagen, Pillow, Colorama e tqdm. Instalação simplificada via script batch com configuração automática de dependências.',
        'en': 'Python application for downloading YouTube videos/audios with GUI and CLI. Features: quality selection, playlists, MP3 extraction and automatic organization. Technologies: yt-dlp, FFmpeg, Tkinter, Threading, Mutagen, Pillow, Colorama and tqdm. Simplified installation via batch script with automatic dependency configuration.'
    },
    'project_planner': {
        'pt': 'Aplicativo Java com Spring Boot para organizar viagens. Permite criar viagens, adicionar atividades e links, convidar participantes via e-mail e gerenciar confirmações, utilizando JPA, H2 Database, Flyway, Lombok e Dev Tools.',
        'en': 'Java application with Spring Boot for organizing trips. Allows creating trips, adding activities and links, inviting participants via email and managing confirmations, using JPA, H2 Database, Flyway, Lombok and Dev Tools.'
    },
    'project_todolist': {
        'pt': 'Aplicação de Lista de Tarefas desenvolvida com Spring Boot, utilizando Spring Data JPA para persistência de dados, Jakarta Servlet para manipulação de requisições HTTP, BCrypt para hashing de senhas e Lombok para simplificação do código.',
        'en': 'Task List application developed with Spring Boot, using Spring Data JPA for data persistence, Jakarta Servlet for handling HTTP requests, BCrypt for password hashing and Lombok for code simplification.'
    },
    'project_delta': {
        'pt': 'Projeto em Arduino de uma maquete de uma base submersa, com sistema de drenagem, ventilação e iluminação, com controle local e via bluetooth.',
        'en': 'Arduino project of a model of a submerged base, with drainage, ventilation and lighting systems, with local control and via bluetooth.'
    },
    'project_rpg_clt': {
        'pt': 'Jogo de RPG baseado em texto desenvolvido em Python para disciplina de Desenvolvimento de Sistemas Orientados a Objetos, com sistema de combate, inventário e narrativa.',
        'en': 'Text-based RPG game developed in Python for the Object-Oriented Systems Development course, with combat system, inventory and narrative.'
    },
    'project_goals': {
        'pt': 'Aplicação para definição e acompanhamento de metas pessoais desenvolvida durante o NLW17, com funcionalidades de criação, edição e exclusão de metas e categorias.',
        'en': 'Application for defining and tracking personal goals developed during NLW17, with features for creating, editing and deleting goals and categories.'
    },
    'project_rpg_market': {
        'pt': 'Plataforma de comércio virtual baseada em jogos de RPG que permite aos jogadores comprar, vender e trocar itens, com sistema de inventário, moeda virtual e negociações entre usuários.',
        'en': 'Virtual commerce platform based on RPG games that allows players to buy, sell and trade items, with inventory system, virtual currency and negotiations between users.'
    },
    'project_portfolio': {
        'pt': 'Site pessoal responsivo com tema claro/escuro, internacionalização, animações suaves e seções para projetos, habilidades e contato, desenvolvido como projeto do curso ONE.',
        'en': 'Responsive personal website with light/dark theme, internationalization, smooth animations and sections for projects, skills and contact, developed as a project for the ONE course.'
    },
    
    // Projects - Technologies
    'project_responsive': {
        'pt': 'Responsivo',
        'en': 'Responsive'
    },
    'project_dht22': {
        'pt': 'Sensor DHT22',
        'en': 'DHT22 Sensor'
    },
    'project_rfid': {
        'pt': 'Sensor RFID',
        'en': 'RFID Sensor'
    },



    // Disciplines Section
    'disciplines_title': {
        'pt': 'Disciplinas Cursadas',
        'en': 'Courses Taken'
    },
    'current_semester': {
        'pt': '2025-1 (Cursando)',
        'en': '2025-1 (Currently Taking)'
    },
    
    // Contact Section
    'contact_title': {
        'pt': 'Contato',
        'en': 'Contact'
    },
    'contact_intro': {
        'pt': 'Estou disponível para projetos freelance, trabalho em equipe ou conversas sobre tecnologia.',
        'en': 'I am available for freelance projects, teamwork or conversations about technology.'
    },
    'contact_email': {
        'pt': 'Email',
        'en': 'Email'
    },
    'contact_phone': {
        'pt': 'Telefone',
        'en': 'Phone'
    },
    'contact_location': {
        'pt': 'Localização',
        'en': 'Location'
    },
    'contact_social': {
        'pt': 'Me encontre nas redes',
        'en': 'Find me on social media'
    },
    'form_title': {
        'pt': 'Envie uma mensagem',
        'en': 'Send a message'
    },
    'form_name': {
        'pt': 'Nome',
        'en': 'Name'
    },
    'form_name_placeholder': {
        'pt': 'Seu nome completo',
        'en': 'Your full name'
    },
    'form_email': {
        'pt': 'Email',
        'en': 'Email'
    },
    'form_email_placeholder': {
        'pt': 'seu.email@exemplo.com',
        'en': 'your.email@example.com'
    },
    'form_subject': {
        'pt': 'Assunto',
        'en': 'Subject'
    },
    'form_subject_placeholder': {
        'pt': 'Sobre o que você quer conversar?',
        'en': 'What would you like to discuss?'
    },
    'form_message': {
        'pt': 'Mensagem',
        'en': 'Message'
    },
    'form_message_placeholder': {
        'pt': 'Digite sua mensagem aqui...',
        'en': 'Type your message here...'
    },
    'form_submit': {
        'pt': 'Enviar mensagem',
        'en': 'Send message'
    },
    'form_success': {
        'pt': 'Mensagem enviada com sucesso! Obrigado pelo contato.',
        'en': 'Message sent successfully! Thank you for contacting.'
    },
    'form_error': {
        'pt': 'Ocorreu um erro ao enviar a mensagem. Por favor, tente novamente.',
        'en': 'An error occurred while sending the message. Please try again.'
    },
    
    // Footer
    'footer_quote': {
        'pt': 'Desenvolvedor Front-end com foco em experiência do usuário',
        'en': 'Front-end developer focused on user experience'
    },
    'footer_course': {
        'pt': 'INE5646-03238B (20251) - Programação para Web/UFSC',
        'en': 'INE5646-03238B (20251) - Web Programming/UFSC'
    },
    
    // Sidebar
    'sidebar_interests': {
        'pt': 'Interesses',
        'en': 'Interests'
    },
    'sidebar_technologies': {
        'pt': 'Tecnologias',
        'en': 'Technologies'
    },
    'sidebar_social': {
        'pt': 'Redes Sociais',
        'en': 'Social Media'
    },
    'sidebar_bio': {
        'pt': 'Desenvolvedor Front-end especializado em criar interfaces modernas e responsivas.',
        'en': 'Front-end developer specialized in creating modern and responsive interfaces.'
    },
    'sidebar_web': {
        'pt': 'Desenvolvimento Web',
        'en': 'Web Development'
    },

    //Header - Menu
    
    'menu.home': {
        'pt': 'Início',
        'en': 'Home'
    },
    'menu.about': {
        'pt': 'Sobre mim',
        'en': 'About me'
    },
    'menu.skills': {
        'pt': 'Habilidades',
        'en': 'Skills'
    },
    'menu.projects': {
        'pt': 'Projetos',
        'en': 'Projects'
    },
    'menu.contact': {
        'pt': 'Contato',
        'en': 'Contact'
    },
    'hero.title': {
        'pt': 'Olá, meu nome é',
        'en': 'Hello, my name is'
    },
    'hero.subtitle': {
        'pt': 'Desenvolvo páginas web',
        'en': 'I develop web pages'
    },
    'hero.description': {
        'pt': 'Sou formado em X e atualmente estou participando no projeto Oracle ONE na Alura.',
        'en': 'I graduated in X and I am currently participating in the Oracle ONE project at Alura.'
    },

    // Contact Form

    'contact.title': {
        'pt': 'Entre em contato',
        'en': 'Contact me'
    },
    'contact.name': {
        'pt': 'Nome',
        'en': 'Name'
    },
    'contact.email': {
        'pt': 'Email',
        'en': 'Email'
    },
    'contact.subject': {
        'pt': 'Assunto',
        'en': 'Subject'
    },
    'contact.message': {
        'pt': 'Mensagem',
        'en': 'Message'
    },
    'contact.send': {
        'pt': 'Enviar mensagem',
        'en': 'Send message'
    },
    'placeholder.name': {
        'pt': 'Digite seu nome',
        'en': 'Enter your name'
    },
    'placeholder.email': {
        'pt': 'Digite seu email',
        'en': 'Enter your email'
    },
    'placeholder.subject': {
        'pt': 'Digite o assunto',
        'en': 'Enter subject'
    },
    'placeholder.message': {
        'pt': 'Digite sua mensagem',
        'en': 'Enter your message'
    }
};

// Adicionando traduções para o Dicionário HTML
Object.assign(window.traducoes, {
    // Dicionário HTML
    'dict_back_home': {
        'pt': 'Voltar para a página inicial',
        'en': 'Back to home page'
    },
    'dict_title': {
        'pt': 'Dicionário de Elementos HTML',
        'en': 'HTML Elements Dictionary'
    },
    'dict_description': {
        'pt': 'Este é um guia das tags HTML utilizadas na construção deste site.',
        'en': 'This is a guide to the HTML tags used in the construction of this site.'
    },
    'dict_doctype_desc': {
        'pt': 'Declaração que define o tipo de documento como HTML5. Não é uma tag HTML, mas uma instrução para o navegador sobre qual versão do HTML está sendo usada.',
        'en': 'Declaration that defines the document type as HTML5. It\'s not an HTML tag, but an instruction to the browser about which version of HTML is being used.'
    },
    'dict_html_desc': {
        'pt': 'Elemento raiz que contém todo o conteúdo da página HTML.',
        'en': 'Root element that contains all the content of the HTML page.'
    },
    'dict_head_desc': {
        'pt': 'Contém metadados sobre o documento, como título, links para CSS, meta tags, etc.',
        'en': 'Contains metadata about the document, such as title, links to CSS, meta tags, etc.'
    },
    'dict_meta_desc': {
        'pt': 'Define metadados como codificação de caracteres, descrição da página, palavras-chave, etc.',
        'en': 'Defines metadata such as character encoding, page description, keywords, etc.'
    },
    'dict_title_desc': {
        'pt': 'Define o título da página que aparece na aba do navegador.',
        'en': 'Defines the title of the page that appears in the browser tab.'
    },
    'dict_link_desc': {
        'pt': 'Conecta o documento a recursos externos, como folhas de estilo CSS.',
        'en': 'Connects the document to external resources, such as CSS stylesheets.'
    },
    'dict_body_desc': {
        'pt': 'Contém todo o conteúdo visível da página.',
        'en': 'Contains all the visible content of the page.'
    },
    'dict_header_desc': {
        'pt': 'Define o cabeçalho da página, geralmente contendo logo, navegação e controles.',
        'en': 'Defines the header of the page, usually containing logo, navigation and controls.'
    },
    'dict_nav_desc': {
        'pt': 'Define uma seção de navegação com links para outras páginas ou seções.',
        'en': 'Defines a navigation section with links to other pages or sections.'
    },
    'dict_menu_desc': {
        'pt': 'Representa um grupo de comandos ou opções, usado para criar menus de navegação.',
        'en': 'Represents a group of commands or options, used to create navigation menus.'
    },
    'dict_li_desc': {
        'pt': 'Define um item de lista, usado dentro de elementos ul, ol ou menu.',
        'en': 'Defines a list item, used inside ul, ol or menu elements.'
    },
    'dict_a_desc': {
        'pt': 'Cria um link para outra página, arquivo ou local na mesma página.',
        'en': 'Creates a link to another page, file, or location on the same page.'
    },
    'dict_aside_desc': {
        'pt': 'Define conteúdo relacionado mas separado do conteúdo principal, como barras laterais.',
        'en': 'Defines content that is related but separate from the main content, such as sidebars.'
    },
    'dict_main_desc': {
        'pt': 'Especifica o conteúdo principal do documento, excluindo cabeçalhos, rodapés e barras laterais.',
        'en': 'Specifies the main content of the document, excluding headers, footers, and sidebars.'
    },
    'dict_section_desc': {
        'pt': 'Define uma seção temática no documento, como capítulos, abas ou partes de uma página.',
        'en': 'Defines a thematic section in the document, such as chapters, tabs, or parts of a page.'
    },
    'dict_headings_desc': {
        'pt': 'Definem títulos de diferentes níveis, onde h1 é o mais importante e h6 o menos importante.',
        'en': 'Define titles of different levels, where h1 is the most important and h6 is the least important.'
    },
    'dict_p_desc': {
        'pt': 'Define um parágrafo de texto.',
        'en': 'Defines a paragraph of text.'
    },
    'dict_div_desc': {
        'pt': 'Define uma divisão ou seção genérica em um documento, usado para agrupar elementos.',
        'en': 'Defines a generic division or section in a document, used to group elements.'
    },
    'dict_span_desc': {
        'pt': 'Define uma seção inline em um documento, usado para aplicar estilos a partes específicas de texto.',
        'en': 'Defines an inline section in a document, used to apply styles to specific parts of text.'
    },
    'dict_img_desc': {
        'pt': 'Insere uma imagem no documento.',
        'en': 'Inserts an image into the document.'
    },
    'dict_button_desc': {
        'pt': 'Cria um botão clicável.',
        'en': 'Creates a clickable button.'
    },
    'dict_i_desc': {
        'pt': 'Originalmente usado para texto em itálico, agora comumente usado para ícones (como Font Awesome).',
        'en': 'Originally used for italic text, now commonly used for icons (such as Font Awesome).'
    },
    'dict_footer_desc': {
        'pt': 'Define o rodapé de uma página ou seção.',
        'en': 'Defines the footer of a page or section.'
    },
    'dict_script_desc': {
        'pt': 'Usado para incorporar ou referenciar código JavaScript.',
        'en': 'Used to embed or reference JavaScript code.'
    },
    'dict_footer_copyright': {
        'pt': 'HTML: A linguagem de marcação da web',
        'en': 'HTML: The web markup language'
    },
    'dict_footer_author': {
        'pt': 'Davi Turnes Vieira | Desenvolvedor Front-end',
        'en': 'Davi Turnes Vieira | Front-end Developer'
    },
    'sidebar_college': {
        'pt': 'Estudante de <a href="https://sin.ufsc.br/" target="_blank">Sistemas de Informação (SIN)</a> na UFSC.',
        'en': 'Student of <a href="https://sin.ufsc.br/" target="_blank">Information Systems (SIN)</a> at UFSC.'
    }
});

// IIFE para inicialização do sistema
(function() {
    console.log('🌎 Inicializando sistema de internacionalização...');
    
    // Verificação de carregamento do DOM
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', inicializar);
    } else {
        inicializar();
    }
    
    function inicializar() {
        // Elementos de UI
        const botoesTraduzir = document.querySelectorAll('.lang-btn');
        
        if (botoesTraduzir.length === 0) {
            console.error('❌ Botões de idioma não encontrados');
            return;
        }
        
        console.log('✅ Sistema de internacionalização encontrou', botoesTraduzir.length, 'botões de idioma');
        
        // Detectar idioma do navegador ou usar idioma salvo
        let idiomaAtual = localStorage.getItem('idioma') || 'pt';
        
        // Configurar botões de idioma
        botoesTraduzir.forEach(botao => {
            botao.addEventListener('click', () => {
                const idioma = botao.dataset.lang;
                console.log('🔄 Mudando idioma para:', idioma);
                
                // Atualizar estado ativo
                botoesTraduzir.forEach(b => b.classList.remove('active'));
                botao.classList.add('active');
                
                // Salvar preferência de idioma
                localStorage.setItem('idioma', idioma);
                
                // Traduzir a interface
                traduzirInterface(idioma);
            });
        });
        
        // Aplicar idioma inicial
        console.log('🗣️ Idioma inicial:', idiomaAtual);
        document.querySelectorAll(`[data-lang="${idiomaAtual}"]`).forEach(btn => 
            btn.classList.add('active')
        );
        
        // Traduzir a interface
        traduzirInterface(idiomaAtual);
    }
})();

// Função global para traduzir a interface
function traduzirInterface(idioma) {
    console.log('🔄 Traduzindo interface para:', idioma);
    
    // Textos a serem traduzidos
    const elementos = document.querySelectorAll('[data-i18n]');
    
    elementos.forEach(elemento => {
        const chave = elemento.getAttribute('data-i18n');
        const traducao = window.traducoes[chave] && window.traducoes[chave][idioma];
        
        if (traducao) {
            // Se for um input ou textarea, atualizar placeholder
            if (elemento.tagName === 'INPUT' || elemento.tagName === 'TEXTAREA') {
                if (elemento.getAttribute('placeholder')) {
                    elemento.setAttribute('placeholder', traducao);
                } else {
                    elemento.value = traducao;
                }
            } 
            // Se for um botão ou elemento com texto direto
            else {
                elemento.innerText = traducao;
            }
        } else {
            console.warn(`⚠️ Tradução não encontrada para: ${chave} (${idioma})`);
        }
    });
    
    // Disparar evento para componentes React ou outros scripts
    document.dispatchEvent(new CustomEvent('idiomaMudou', { 
        detail: { idioma } 
    }));
}